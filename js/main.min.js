(()=>{(function(){let t={};function r(){t.frontendEditor=document.querySelector(".frontend-editor"),t.editButton=document.querySelector(".frontend-editor-edit"),t.updateButton=document.querySelector(".frontend-editor-update"),t.cancelButton=document.querySelector(".frontend-editor-cancel"),t.entryContent=document.querySelector(".entry-content")}function n(){t.entryContent.setAttribute("hidden","true"),t.editButton.setAttribute("hidden","true"),t.frontendEditor.removeAttribute("hidden"),t.updateButton.removeAttribute("hidden"),t.cancelButton.removeAttribute("hidden")}function o(){t.frontendEditor.setAttribute("hidden","true"),t.updateButton.setAttribute("hidden","true"),t.cancelButton.setAttribute("hidden","true"),t.editButton.removeAttribute("hidden"),t.entryContent.removeAttribute("hidden")}function u(e){let f=e.target.getAttribute("name")==="s";e.key==="e"&&!f&&n()}function d(){let e={ID:t.frontendEditor.dataset.postid,post_content:tinymce.activeEditor.getContent()},i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch(`${t.frontendEditor.dataset.wpurl}wiki/v1/update-item/`,i).then(()=>{o(),t.entryContent.innerHTML=tinymce.activeEditor.getContent()})}function c(){n()}function l(){o()}function a(){document.addEventListener("keydown",u),t.editButton.addEventListener("click",c),t.cancelButton.addEventListener("click",d),t.updateButton.addEventListener("click",d)}function s(){r(),a()}s()})();})();
